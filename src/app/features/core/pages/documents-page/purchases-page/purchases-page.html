<app-table-struct
  title="Закупки"
  showDetail
  [trackField]="'id'"
  [data]="filteredPurchases()"
  [columns]="columns"
  [isLoading]="purchases.isLoading()"
  [(selectedItem)]="selectedPurchase"
  (createdClicked)="openCreateDialog()"
  (detailClicked)="openDetails($event)"
  (deletedClicked)="deletePurchase($event)"
  (searched)="searchQuery.set($event)"
>
  <div toolbar-actions class="flex items-center gap-2">
    <button
      uiButton
      variant="ghost"
      size="sm"
      [disabled]="!selectedPurchase()"
      [loading]="isLoading()"
      [icon]="
        selectedPurchase()?.status === DocumentStatus.COMPLETED ? 'outline-x' : 'outline-check'
      "
      (click)="toggleStatus()"
    >
      Провести / Отменить проведение
    </button>
  </div>
</app-table-struct>
