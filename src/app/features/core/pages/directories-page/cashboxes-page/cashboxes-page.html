<ui-page-header title="Кассы" showBack>
  <div actions class="flex items-center gap-2">
    <button uiButton variant="ghost" (click)="reload()">Обновить</button>
    <button uiButton variant="primary" icon="outline-plus" (click)="onCreate()">
      Создать кассу
    </button>
  </div>
</ui-page-header>

<ui-breadcrumb class="mb-2 block" [items]="breadcrumbItems()" />

@if (cashboxes.isLoading()) {
  <div class="flex h-64 items-center justify-center">
    <ui-loading [width]="40" [height]="40" />
  </div>
} @else if (cashboxes.hasValue()) {
  @if (cashboxes.value().length > 0) {
    <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4">
      @for (cashbox of cashboxes.value(); track cashbox.id) {
        <ui-directory-item-card
          [title]="cashbox.name"
          [subtitle]="'Магазин: ' + (cashbox.store.name || 'Нет магазина')"
          (edit)="onEdit(cashbox)"
          (delete)="onDelete(cashbox)"
        >
          <div
            class="default-border-color mt-auto flex items-center justify-between border-t pt-3 text-xs text-slate-500"
          >
            <span>ID: {{ cashbox.id }}</span>
            <span>Создан: {{ cashbox.createdAt | date: 'dd.MM.yyyy' }}</span>
          </div>
        </ui-directory-item-card>
      }
    </div>
  } @else {
    <ui-empty-state
      title="Список касс пуст"
      description="В данном магазине пока нет ни одной кассы. Создайте первую кассу, чтобы начать работу."
      icon="outline-box"
      actionLabel="Создать кассу"
      (action)="onCreate()"
    />
  }
}
