<ui-page-header title="Data Table" />

<div class="space-y-6">
  <ui-card class="overflow-hidden p-0">
    <div class="flex items-center justify-between border-b border-slate-100 bg-slate-50/50 p-6">
      <div>
        <h3 class="text-lg font-bold text-slate-900">User Directory</h3>
        <p class="text-sm text-slate-500">Manage all registered system users and their roles.</p>
      </div>
      <div class="flex gap-2">
        <label
          class="flex cursor-pointer items-center gap-2 rounded border bg-white px-3 py-1 text-xs"
        >
          <input
            type="checkbox"
            [checked]="configLoading()"
            (change)="configLoading.set($any($event.target).checked)"
          />
          Loading
        </label>
        <label
          class="flex cursor-pointer items-center gap-2 rounded border bg-white px-3 py-1 text-xs"
        >
          <input
            type="checkbox"
            [checked]="configEmpty()"
            (change)="configEmpty.set($any($event.target).checked)"
          />
          Empty
        </label>
        <button uiButton size="sm" variant="secondary" icon="outline-download">Export</button>
        <button uiButton size="sm" variant="primary" icon="outline-plus">New User</button>
      </div>
    </div>

    <ui-table [loading]="configLoading()" [isEmpty]="!tableData().length">
      <tr header>
        <th style="width: 40px">
          <!-- Checkbox column header if needed -->
        </th>
        <th style="width: 60px">ID</th>
        <th>User Name</th>
        <th>System Role</th>
        <th>Account Status</th>
        <th>Last login activity</th>
      </tr>

      @for (row of tableData(); track row.id) {
        <tr
          class="cursor-pointer hover:bg-slate-50"
          [class.bg-blue-50]="selectedUser()?.id === row.id"
          (click)="selectedUser.set(row)"
        >
          <!-- Selection Checkbox (Simulated) -->
          <td class="p-4" (click)="$event.stopPropagation()">
            <input
              type="checkbox"
              name="select-user-{{ row.id }}"
              class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"
              [checked]="selectedUser()?.id === row.id"
              [value]="row.id"
              (change)="toggleSelect(row, $event)"
            />
          </td>

          <!-- ID -->
          <td>{{ row.id }}</td>

          <!-- Name -->
          <td>{{ row.name }}</td>

          <!-- Role -->
          <td>{{ row.role }}</td>

          <!-- Status -->
          <td>
            <ui-badge [variant]="row.status | userBadgeVariant">
              {{ row.status | userBadgeLabel }}
            </ui-badge>
          </td>

          <!-- Last Login -->
          <td>{{ row.lastLogin | date }}</td>
        </tr>
      }
    </ui-table>
  </ui-card>

  @if (selectedUser(); as user) {
    <ui-card class="border-primary-100 bg-primary-50/20 p-6">
      <h3 class="text-primary-700 mb-4 text-sm font-bold tracking-wider uppercase">
        Quick Details: {{ user.name }}
      </h3>
      <div class="grid grid-cols-1 gap-6 md:grid-cols-3">
        <div class="flex flex-col gap-1">
          <span class="text-[10px] font-bold text-slate-400 uppercase">Unique Identifier</span>
          <span class="font-mono text-sm">#USR-{{ user.id | number: '3.0' }}</span>
        </div>
        <div class="flex flex-col gap-1">
          <span class="text-[10px] font-bold text-slate-400 uppercase">Current Role</span>
          <span class="text-sm font-medium">{{ user.role }}</span>
        </div>
        <div class="flex flex-col gap-1">
          <span class="text-[10px] font-bold text-slate-400 uppercase">Last Activity</span>
          <span class="text-sm">{{ user.lastLogin }}</span>
        </div>
      </div>
    </ui-card>
  }
</div>
