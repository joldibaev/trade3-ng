<table ngGrid focusMode="roving" class="w-full border-collapse text-sm" [enableSelection]="true">
  <thead>
    <tr ngGridRow>
      @for (col of columns(); track col.key) {
        <th ngGridCell>
          {{ col.header }}
        </th>
      }
    </tr>
  </thead>
  <tbody>
    @if (data().length) {
      @for (row of data(); track row; let i = $index) {
        <tr ngGridRow>
          @for (col of columns(); track col.key; let j = $index) {
            <td
              #td="ngGridCell"
              ngGridCell
              [rowIndex]="i"
              [colIndex]="j"
              [class.active]="td.active()"
              (selectedChange)="onSelectedChange()"
            >
              @switch (col.type) {
                @case ('date') {
                  {{ row[col.key] | toString | date: 'dd.MM.yyyy HH:mm' }}
                }
                @case ('number') {
                  {{ row[col.key] | toNumber | number }}
                }
                @default {
                  {{ row[col.key] }}
                }
              }
            </td>
          }
        </tr>
      }
    } @else {
      <tr>
        <td class="p-0!" [attr.colspan]="columns().length">
          <div class="empty-state">
            <span class="text-gray-500">Нет данных</span>
          </div>
        </td>
      </tr>
    }
  </tbody>
</table>
